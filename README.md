# Data Analysis For Food Delivery Platform Uisng SQL
## Project Overview  

**Project Title**: Data Analysis using SQL (Food Delivery Platform)   
**Database**: `food_delivery`  

This porject demostrates **SQL based** comprehensive analysis based on some designed question for a food delivery platform. Throughout this project, I have used basic to intermediate SQL queries such as JOINS,SubQueries,Aggregate Functions etc.

## Objectives

1. Designing questionnaires for analysis
2. Implmenting SQL Queries 
  
## SQL CODE FOR DATA ANALYSIS
```sql
Use food_delivery;

-- Q1: Which cities have the highest number of registered users?

SELECT
    c.city_name,
    COUNT(u.ID) AS Total_Users
FROM User_info AS u
INNER JOIN city AS c
    ON u.CITY_ID = c.city_id
GROUP BY c.city_name
ORDER BY Total_Users DESC;

-- Q2: Find the distribution of users by operating system?

SELECT operating_system, COUNT(*) AS total_users
FROM User_info
GROUP BY operating_system;

-- Q3: Total number of verified vs unverified riders.

SELECT
r.verified,
COUNT(*) AS "Total Riders"
FROM Rider_info AS r
GROUP BY r.verified;

-- Q4: Find the number of riders per vehicle type.

SELECT
vt.vehicle_name,
COUNT(r.ID) AS "Total Riders"
FROM Rider_info AS r
INNER JOIN vehicle_type AS vt
ON r.vehicle_type_id = vt.vehicle_type_id
GROUP BY vt.vehicle_name;

-- Q5: Find out the number of restaurants depending on cuisine type.

SELECT
ct.cuisine_name,
COUNT(r.restaurant_id) AS total_restaurants
FROM Restaurant_info AS r
INNER JOIN Cuisine_Type AS ct
ON r.cuisine_type_id = ct.cuisine_type_id
GROUP BY ct.cuisine_name
ORDER BY total_restaurants DESC;

-- Q6: Find Top 5 Restaurants that have the most menu items.

SELECT
r.name,
COUNT(m.item_id) AS total_items
FROM Restaurant_info AS r
INNER JOIN MenuItems AS m
ON r.restaurant_id = m.restaurant_id
GROUP BY r.name
ORDER BY total_items DESC
LIMIT 5 ;

-- Q7: Calculate the total revenue generated by each restaurant.

SELECT r.name AS restaurant_name, SUM(o.total_amount) AS total_revenue
FROM Orders o
JOIN Restaurant_info r ON o.restaurant_id = r.restaurant_id
GROUP BY r.name
ORDER BY total_revenue DESC;

-- Q8: Find the top 10 most ordered menu items.

SELECT
m.name AS item_name,
SUM(oi.quantity) AS total_ordered
FROM order_items AS oi
INNER JOIN MenuItems AS m
ON oi.item_id = m.item_id
GROUP BY m.name
ORDER BY total_ordered DESC
LIMIT 10;

-- Q9: Count the total transactions depending on transaction types.

SELECT
pt.name AS "Payment Type",
COUNT(*) AS "Total Transactions"
FROM Payment_Transactions AS p
INNER JOIN Payment_type AS pt
ON p.pay_type_id = pt.pay_type_id
GROUP BY pt.name;

-- Q10: Show the names of top 5 users by spending.

SELECT
u.name,
SUM(o.total_amount) AS total_spent
FROM Orders AS o
INNER JOIN User_info AS u
ON o.user_id = u.ID
GROUP BY u.name
ORDER BY total_spent DESC
LIMIT 5;

-- Q11: Calculate the Order cancellation rate per restaurant

SELECT
r.name AS restaurant_name,
SUM(CASE WHEN s.status='Canceled' THEN 1 ELSE 0 END) AS canceled_orders,
COUNT(o.order_id) AS total_orders,
ROUND(SUM(CASE WHEN s.status='Canceled' THEN 1 ELSE 0
END)/COUNT(o.order_id)*100,2) AS cancel_rate
FROM Orders AS o
INNER JOIN restaurant_info AS r
ON o.restaurant_id = r.restaurant_id
INNER JOIN Status AS s
ON o.status_id = s.status_id
GROUP BY r.name
ORDER BY cancel_rate DESC;

-- I have used Sub Queries for anwering the following question for danalysis purpose

-- Q12: Find the total number of orders placed by each user. Display the user’s name and the count of orders, sorted from the most active user to the least.

SELECT name, COUNT(user_id) AS placed_orders
FROM (
SELECT * FROM user_info INNER JOIN orders ON user_info.ID =
orders.user_id
) AS sub GROUP BY user_id ORDER BY COUNT(user_id) DESC;

-- Q13: For each restaurant, calculate the average price of its menu items. List the restaurant names alphabetically along with their average menu price.

SELECT restaurant, AVG(price) as "AVG Price"
FROM(
SELECT restaurant_info.name AS restaurant,menuitems. * FROM
restaurant_info INNER JOIN menuitems ON restaurant_info.restaurant_id =
menuitems.restaurant_id
) AS Sub2 GROUP BY restaurant ORDER BY restaurant ASC;

-- Q13: Identify the restaurant that generated the highest total revenue. Display the restaurant’s name and total revenue.

SELECT name, total FROM
(
SELECT name,SUM(total_amount) AS total
FROM
(
SELECT restaurant_info.name, orders.* FROM restaurant_info, orders
WHERE restaurant_info.restaurant_id = orders.restaurant_id
) AS SUB GROUP BY name

) AS SUB2 WHERE total = (
SELECT MAX(total) FROM
(
SELECT name,SUM(total_amount) AS total
FROM
(
SELECT restaurant_info.name, orders.* FROM restaurant_info, orders
WHERE restaurant_info.restaurant_id = orders.restaurant_id
) AS SUB GROUP BY name ORDER BY total DESC
) AS tendency
);
```
